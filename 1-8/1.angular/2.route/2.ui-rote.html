<!DOCTYPE html>
<html ng-app="appModule">
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
    <link rel="stylesheet" href="bootstrap.css"/>
</head>
<body>
<div class="container">
    <ul class="nav nav-tabs">
        <li ng-class="{active:'home'==current}"><a ui-sref="home" href="#">首页</a></li>
        <li ng-class="{active:'user'==current}"><a ui-sref="user" href="#">用户管理</a></li>
        <li ng-class="{active:'profile'==current}"><a ui-sref="profile" href="#">个人信息</a></li>
    </ul>
    <div ui-view></div>
</div>
</body>
<script src="../angular.js"></script>
<script src="angular-ui-router.js"></script>
<script>
    var app=angular.module("appModule",["ui.router"]);
    app.run(function($rootScope){
        $rootScope.$on('$stateChangeStart',function(event,toState,toParams,formState,formParams){
            if(toState.needLogin&&!$rootScope.username){
                alert("您还没有登录哦!");
                event.preventDefault();//阻止事件的默认跳转
                return;
            }
            $rootScope.current = toState.name;
        });
    });
    app.config(function($stateProvider){
        $stateProvider.state('home',{
            url:'/home',//定义路径,首页
            templateUrl:'./home.html',
            controller:'homeCtrl'
        }).state('user',{
            url:'/user',//用户管理
            templateUrl:'./user.html',
            controller:'userCtrl'
        }).state('profile',{
            url:'/profile',//个人信息
            templateUrl:'./profile.html',
            controller:'profileCtrl'
        }).state('user.list',{
            url:'/list',//用户列表
            templateUrl:'./list.html',
            controller:'listCtrl'
        }).state('user.add',{
            url:'/add',//添加用户
            templateUrl:'./add.html',
            controller:'addCtrl',
            needLogin:true
        }).state('user.view',{
            url:'/view/:id',//查看用户信息
            templateUrl:'./view.html',
            controller:'viewCtrl'
        }).state('login',{
            url:'/login',//登录
            template:'请登陆'
        })
    });
    app.constructor("homeCtrl",function($scope){

    });
    app.constructor("userCtrl",function($scope){

    });
    app.constructor("profileCtrl",function($scope){

    });
    app.constructor("listCtrl",function($scope){
        $scope.title = "list";
    });
    app.constructor("addCtrl",function($scope){
        $scope.title = "add";
    });
    app.constructor("viewCtrl",function($scope,$stateParams){
        $scope.title = "view";
        $scope.id = $stateParams.id;
    });

</script>
</html>